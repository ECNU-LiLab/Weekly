**姓名** 仇鑫

**日期** 2020/6/8 - 2020/6/14

------

### 本周已完成任务

1. 思考论文改进方案
2. 使用Shap进行简单测试
3. 华为船运到达时间预测

### 下周任务

2. 探索xgboost的可解释可行性

### 总结

目前的船运到达时间预测，进行了一些特征工程。首先为了防止过拟合，因此对训练集进行随机采样，构造出验证集。特征工程主要是根据GPS进行构造label，将每个运单号的最后一个GPS看做是label，因为不管这个样本是否真的到达港口，都可以将它看做到港，将每个运单号的最后一个GPS看做是label，因为不管这个样本是否真的到达港口，都可以将它看做到港。同时计算与目的地的距离和与出发地的距离,计算时长和历史平均速度作为新的特征。

在构建数据集时，画图查看分布可以确认随机采样是否符合数据集构建是否正确。



另一方面，使用Shap进行了一些尝试。SHAP 含义：观察到某一个样本的预测中各个特征对预测结果产生的影响。

基本思想：计算一个特征加入到模型时的边际贡献，然后考虑到该特征在所有的特征序列的情况下不同的边际贡献，取均值，即某该特征的SHAP baseline value。

这里以波士顿房价预测为例，这是个Tabular数据集。	

```
CRIM：城镇人均犯罪率。

ZN：住宅用地超过 25000 sq.ft. 的比例。

INDUS：城镇非零售商用土地的比例。

CHAS：查理斯河空变量（如果边界是河流，则为1；否则为0）。

NOX：一氧化氮浓度。

RM：住宅平均房间数。

AGE：1940 年之前建成的自用房屋比例。

DIS：到波士顿五个中心区域的加权距离。

RAD：辐射性公路的接近指数。

TAX：每 10000 美元的全值财产税率。

PTRATIO：城镇师生比例。

B：1000（Bk-0.63）^ 2，其中 Bk 指代城镇中黑人的比例。

LSTAT：人口中地位低下者的比例。

MEDV：自住房的平均房价，以千美元计。
```

训练数据



使用xgboost进行模型训练，使用shap对模型提取出shap值矩阵，以此对前两个样本进行解释。可以看出不同样本，每个特征的重要程度不同，有些呈负相关。



除了Tabular数据集，NLP数据集使用IMDB数据集进行了简单的尝试，目前还没看出很直接的结论。

